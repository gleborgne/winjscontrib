/* 
 * WinJS Contrib v2.1.0.4
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib;!function(e){var n;!function(n){var t;!function(t){e.Logs.Appenders=e.Logs.Appenders;var r=function(){function t(e){this.config=e||{level:n.Levels.inherit}}return t.prototype.clone=function(){return new e.Logs.Appenders.ConsoleAppender(this.config)},t.prototype.log=function(e,t,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=[this.format(e,t,r)];switch(i.length&&i.forEach(function(e){a.push(e)}),r){case n.Levels.verbose:return console.log.apply(console,a);case n.Levels.debug:return console.log.apply(console,a);case n.Levels.info:return console.info.apply(console,a);case n.Levels.warn:return console.warn.apply(console,a);case n.Levels.error:return console.error.apply(console,a)}},t.prototype.group=function(e){console.group(e)},t.prototype.groupCollapsed=function(e){console.groupCollapsed(e)},t.prototype.groupEnd=function(){console.groupEnd()},t.prototype.format=function(e,t,r){var i="";return e.Config&&e.Config.prefix&&(i+=e.Config.prefix+" # "),this.config.showLoggerNameInMessage&&(i+=e.name+" # "),this.config.showLevelInMessage&&(i+=n.logginLevelToString(r)+" # "),i+=t},t}();t.ConsoleAppender=r}(t=n.Appenders||(n.Appenders={}))}(n=e.Logs||(e.Logs={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(e){var n;!function(n){function t(e,t){var i=s[e];return i||(i=new c(t||n.defaultConfig),i.name=e,s[e]=i),(t||arguments.length>2)&&r.apply(null,arguments),i}function r(e,n){var t=s[e];if(t&&(n&&(t.Config=n),arguments.length>2))for(var r=2;r<arguments.length;r++)t.addAppender(arguments[r])}function i(e){switch(e.toLowerCase()){default:case"log":case"debug":return a.debug;case"info":return a.info;case"warn":return a.warn;case"error":return a.error}}function o(e){switch(e){default:case a.verbose:return"VERBOSE";case a.debug:return"DEBUG";case a.info:return"INFO";case a.warn:return"WARN";case a.error:return"ERROR"}}e.Logs=e.Logs,function(e){e[e.inherit=512]="inherit",e[e.off=256]="off",e[e.error=32]="error",e[e.warn=16]="warn",e[e.info=8]="info",e[e.debug=4]="debug",e[e.verbose=2]="verbose"}(n.Levels||(n.Levels={}));var a=n.Levels;n.defaultConfig={level:a.off,showLevelInMessage:!1,showLoggerNameInMessage:!1,appenders:["DefaultConsole"]};var s={};n.RuntimeAppenders={DefaultConsole:new n.Appenders.ConsoleAppender},n.getLogger=t,n.configure=r,n.loggingLevelStringToEnum=i,n.logginLevelToString=o;var c=function(){function t(e){this.appenders=[],this.Config=e||n.defaultConfig}return Object.defineProperty(t.prototype,"Config",{get:function(){return this._config},set:function(e){var t=this;this._config=e||{level:n.Levels.off,showLevelInMessage:!1,showLoggerNameInMessage:!1},"number"==typeof e.level&&(this.Level=e.level),"boolean"==typeof e.showLevelInMessage&&(this.Config.showLevelInMessage=e.showLevelInMessage),"boolean"==typeof e.showLoggerNameInMessage&&(this.Config.showLoggerNameInMessage=e.showLoggerNameInMessage),this._config.appenders?this._config.appenders.forEach(function(e){t.addAppender(e)}):this._config.appenders=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this._level},set:function(e){this._level=e,this.verbose=this._level<=n.Levels.verbose?t.verbose:t.noop,this.debug=this._level<=n.Levels.debug?t.debug:t.noop,this.info=this._level<=n.Levels.info?t.info:t.noop,this.warn=this._level<=n.Levels.warn?t.warn:t.noop,this.error=this._level<=n.Levels.error?t.error:t.noop},enumerable:!0,configurable:!0}),t.prototype.addAppender=function(n){"string"==typeof n&&(n=e.Logs.RuntimeAppenders[n]);var t=n;if(t){var r=this.appenders.indexOf(t)>=0;r||this.appenders.push(t)}},t.prototype.log=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(this._config.level===e.Logs.Levels.off||t<this._config.level)&&this.appenders&&this.appenders.length){var o=[this,n,t];if(r.length)for(var a=0;a<r.length;a++)o.push(r[a]);this.appenders.forEach(function(e){e.log.apply(e,o)})}},t.prototype.verbose=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.prototype.debug=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.prototype.info=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.prototype.warn=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.prototype.error=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.prototype.group=function(e){this.appenders.forEach(function(n){n.group&&n.group(e)})},t.prototype.groupCollapsed=function(e){this.appenders.forEach(function(n){n.groupCollapsed&&n.groupCollapsed(e)})},t.prototype.groupEnd=function(){this.appenders.forEach(function(e){e.groupEnd&&e.groupEnd()})},t.prototype.getChildLogger=function(n,t){var r=e.Logs.getLogger(this.name+"."+n,JSON.parse(JSON.stringify(this.Config)));return r.Config.appenders=[],this.appenders.forEach(function(e){e.clone&&r.addAppender(e.clone())}),t&&(r.Config.level=t),r},t.noop=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]},t.getLogFn=function(e){return function(n){var t=null;if(arguments.length>1){t=[];for(var r=1;r<arguments.length;r++)t.push(arguments[r]);this.log(n,e,t)}else this.log(n,e)}},t.verbose=t.getLogFn(n.Levels.verbose),t.debug=t.getLogFn(n.Levels.debug),t.info=t.getLogFn(n.Levels.info),t.warn=t.getLogFn(n.Levels.warn),t.error=t.getLogFn(n.Levels.error),t}();n.Logger=c}(n=e.Logs||(e.Logs={}))}(WinJSContrib||(WinJSContrib={})),function(e){this.setImmediate||(this.setImmediate=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return setTimeout(e,0),0}),this.toStaticHTML||(this.toStaticHTML=function(e){return e});var n=e.MSApp;n&&!n.execUnsafeLocalFunction&&(n.execUnsafeLocalFunction=function(e){e()})}(this),Object.map||(Object.map=function(e,n){var t={};return"object"!=typeof e?t:("function"!=typeof n&&(n=function(e,n){return[e,n]}),Object.keys(e).forEach(function(r){var i=n.apply(e,[r,e[r]]);i&&i.length&&(t[i[0]||r]=i[1])}),t)}),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(n,t){return"undefined"!=typeof e[t]?e[t]:n})}),String.prototype.padLeft||(String.prototype.padLeft=function(e,n){return void 0===n&&(n="0"),this.length<e?(n+this).padLeft(e,n):this});var WinJSContrib;!function(e){var n;!function(e){function n(e,n){var t=WinJS.Promise.wrap(),r=[];if(!e)return WinJS.Promise.wrap([]);var i=WinJS.Promise.as(e);return i.then(function(e){for(var i=function(e,t){return e.then(function(e){return WinJS.Promise.as(n(t)).then(function(e){r.push(e)})})},o=0,a=e.length;a>o;o++){var s=e[o];!s&&e.getItem&&(s=e.getItem(o)),t=i(t,s)}return t.then(function(e){return r})})}function t(e,n){if(!e)return WinJS.Promise.wrap([]);var t=WinJS.Promise.as(e);return t.then(function(e){for(var t=[],r=0,i=e.length;i>r;r++){var o=e[r];!o&&e.getItem&&(o=e.getItem(r)),t.push(WinJS.Promise.as(n(o)))}return WinJS.Promise.join(t)})}function r(e,n,t){if(!e)return WinJS.Promise.wrap([]);var r=WinJS.Promise.as(e);return r.then(function(e){for(var r=WinJS.Promise.wrap(),i=[],o=[],a=!1,s=function(e,n){return e.then(function(e){return WinJS.Promise.join(n.map(function(e){return WinJS.Promise.as(t(e))})).then(function(e){e=e.concat(e)},function(e){o=o.concat(e),a=!0})})},c=0,u=e.length;u>c;c++){var l=e[c];!l&&e.getItem&&(l=e.getItem(c)),i.push(l),c>0&&c%n===0&&(r=s(r,i),i=[])}return i.length&&(r=s(r,i)),r.then(function(){return a?WinJS.Promise.wrapError(o):o})})}e.waterfall=n,e.parallel=t,e.batch=r}(n=e.Promise||(e.Promise={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(e){var n;!function(n){function t(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]}function r(e,n){if(!n)return!1;var t=e.match("^"+n)==n;return t}function i(e,n,t){void 0===t&&(t=1);for(var r=0;r<e.length;)setImmediate(function(){for(var i=0;t>i&&r<e.length;i++)r++,n(e[r])})}function o(e,n){return n?e.match(n+"$")==n:!1}function a(n){var t=[];for(var r in n)if(n.hasOwnProperty(r)){var i=encodeURIComponent(r),o=n[r],a=e.Utils.hasValue(o)?encodeURIComponent(o):"";t.push(i+"="+a)}return t.join("&")}function s(e,n,t,r){var i=document.createEvent("Event");i.initEvent(n,t,r),e.dispatchEvent(i)}function c(e,n,t,r,i){var o=document.createEvent("CustomEvent");o.initCustomEvent(n,t,r,i),e.dispatchEvent(o)}function u(e,n){if(e){if("this"===n)return e;var t=e[n];if("undefined"!=typeof t)return t;var r=n.indexOf("[");if(!(0>r)){var i=n.indexOf("]",r);if(!(0>i)){var o=n.substr(r+1,i-r);return o=parseInt(o),e[o]}}}}function l(n,t,r){if(n){if(e.Utils.hasValue(t))return n.setProperty?void n.setProperty(t,r):void(n[t]=r);if("string"==typeof t){var i=t.indexOf("[");if(0>i)return;var o=t.indexOf("]",i);if(0>o)return;var a=t.substr(i+1,o-i),s=parseInt(a);n[s]=r}}}function p(n,t){if("string"==typeof t&&n[t])return n[t];if(!t||!t.length)return n;var r=e.Utils.getProperty(n,t);return r?r.propValue:void 0}function f(e,n){"string"==typeof n&&(n=n.split(".")),n&&n.length||(n=["this"]);for(var t=e,r=null,i=0;i<n.length;i++){var o=new O(t,r,n[i]);if(r=o,i==n.length-1)return o;t=u(t,n[i])}}function d(n,t,r){var i=e.Utils.getProperty(n,t);i&&(i.propValue=r)}function g(e,n){return Math.random()*(n-e+1)+e<<0}function v(e,n){return e>n?1:n>e?-1:0}function h(n,t,r){if(null===n||0===n.length)return n;"undefined"==typeof r&&(r=!1);var i,o,a="",s=0,c=[];if(r)for(o=0;o<n.length;o++){if(t){var u=e.Utils.readProperty(n[o],t.split("."));i=u,u||(i=u),u&&u.toLowerCase&&(i=u.toLowerCase())}else i=n[o];a.indexOf("|"+i+"|")<0&&(a+="|"+i+"|",c[s++]=n[o])}else for(o=0;o<n.length;o++)i=t?e.Utils.readProperty(n[o],t.split(".")):n[o],a.indexOf("|"+i+"|")<0&&(a+="|"+i+"|",c[s++]=n[o]);return c}function m(t,r,i){return n.distinctArray(t,r,i).map(function(n){return e.Utils.readProperty(n,r.split("."))})}function y(e){var n=e.toLowerCase();return n=n.replace(new RegExp("[àáâãäå]","g"),"a"),n=n.replace(new RegExp("æ","g"),"ae"),n=n.replace(new RegExp("ç","g"),"c"),n=n.replace(new RegExp("[èéêë]","g"),"e"),n=n.replace(new RegExp("[ìíîï]","g"),"i"),n=n.replace(new RegExp("ñ","g"),"n"),n=n.replace(new RegExp("[òóôõö]","g"),"o"),n=n.replace(new RegExp("œ","g"),"oe"),n=n.replace(new RegExp("[ùúûü]","g"),"u"),n=n.replace(new RegExp("[ýÿ]","g"),"y")}function w(e){var n=[];WinJS.Navigation.history&&WinJS.Navigation.history.backStack&&WinJS.Navigation.history.backStack.length&&WinJS.Navigation.history.backStack.forEach(function(t){t.location!==e&&n.push(t)}),WinJS.Navigation.history.backStack=n}function C(e){return(10>e?"0":"")+e}function S(e,n,t){if(!e)return"";var r=e.length>n,i=r?e.substr(0,n-1):e;return i=t&&r?i.substr(0,i.lastIndexOf(" ")):i,r?i+"...":i}function T(){var e=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:7&t|8).toString(16)});return n}function b(e,n){if(e&&e.parentElement)for(var t=e.parentElement;t;){if(t.winControl&&void 0!==t.winControl[n])return t.winControl[n];t=t.parentElement}}function P(e,n){if(e&&n){for(var t=[],r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);t.forEach(function(e){n.appendChild(e)})}}function W(e,n){if(n)for(var t=n.parentNode;t;){if(t[e]&&t.winControl)return t.winControl;t=t.parentNode}}function L(e,n){if(n)for(var t=n.parentNode;t;){if(t.classList&&t.classList.contains(e)&&t.winControl)return t.winControl;t=t.parentNode}}function k(n){return e.Utils.getParent("mcnPage",n)}function J(e){for(var n=e.parentNode;n;){if(n.msParentSelectorScope){var t=n.parentNode;if(t){var r=t.winControl;if(r)return r}}n=n.parentNode}}function U(e){if(e){var n=typeof e;if("string"==n)return new WinJS.Binding.Template(null,{href:e});if("function"==n)return{render:function(n,t){var r=e(n,t);return WinJS.Promise.as(r)}};if(e.winControl)return e.winControl;if(e.render)return e}}function E(n,t){var r=e.Utils.resolveValue(n,t);return r&&"function"==typeof r?r:void 0}function I(n,t){var r=e.Utils.resolveValue(n,t);return r?"function"==typeof r?r(n):r:void 0}function A(e,t,r){var i=t.split(":");if(i.length>1){var o=i[0],a=t.substr(o.length+1),s=n.ValueParsers[o];if(s)return s(e,a,r)}return t}function x(n,t,r,i,o){var a=e.Utils.resolveValue(n,t,o);a&&a.then&&a.mcnMustResolve?a.then(function(n){e.Utils.writeProperty(r,i,n)}):e.Utils.writeProperty(r,i,a)}function _(e){return"undefined"!=typeof e&&null!==e}function M(e){return"{0} - {1}: {2}".format(e.status,e.statusText,e.responseText)}function D(e){return function(n){for(var t=null,r=0;r<n.length;r++){var i=n[r];if("undefined"!=typeof i){t=i;break}}return e(t)}}function N(e,n){if(n)for(var t in n)e[t]=n[t]}n.extend=t,n.startsWith=r,String.prototype.startsWith||(String.prototype.startsWith=function(n){return e.Utils.startsWith(this,n)}),n.asyncForEach=i,n.endsWith=o,String.prototype.endsWith||(String.prototype.endsWith=function(n){return e.Utils.endsWith(this,n)}),n.queryStringFrom=a,n.triggerEvent=s,n.triggerCustomEvent=c,n.readProperty=p;var O=function(){function e(e,n,t){this.parent=e,this.parentDescriptor=n,this.keyProp=t}return e.prototype.ensureParent=function(){return parent?parent:void(this.parentDescriptor&&(this.parentDescriptor.ensureParent(),this.parentDescriptor.parent[this.parentDescriptor.keyProp]||(this.parentDescriptor.parent[this.parentDescriptor.keyProp]={},this.parent=this.parentDescriptor.parent[this.parentDescriptor.keyProp])))},Object.defineProperty(e.prototype,"propValue",{get:function(){return u(this.parent,this.keyProp)},set:function(e){this.ensureParent(),l(this.parent,this.keyProp,e)},enumerable:!0,configurable:!0}),e}();n.PropertyDescriptor=O,n.getProperty=f,n.writeProperty=d,n.randomFromInterval=g,n.alphabeticSort=v,n.distinctArray=h,n.getDistinctPropertyValues=m,n.removeAccents=y,n.removePageFromHistory=w,n.pad2=C,n.ellipsisizeString=S,n.guid=T,n.inherit=b,n.moveChilds=P,n.getParent=W,n.getParentControlByClass=L,n.getParentPage=k,n.getScopeControl=J,n.getTemplate=U,n.resolveMethod=E,n.readValue=I,n.ValueParsers={navpage:function(n,t,r){var i=r&&r.data?r.data.navpage:null;if(i||(e.Utils.getParentPage&&(i=e.Utils.getParentPage(n),r&&r.data&&(r.data.navpage=i)),!i&&e.UI.Application.navigator&&(i=e.UI.Application.navigator.pageControl,r&&r.data&&(r.data.navpage=i))),i){r&&(r.parentControl=i);var o=e.Utils.readProperty(i,t);return o&&"function"==typeof o?o.bind(i):o}},page:function(n,t,r){var i=r&&r.data?r.data.page:null;if(i||(i=e.Utils.getParentControlByClass("pagecontrol",n),r&&r.data&&(r.data.page=i)),i){r&&(r.parentControl=i);var o=e.Utils.readProperty(i,t);return o&&"function"==typeof o?o.bind(i):o}},ctrl:function(n,t,r){var i=r&&r.data?r.data.scope:null;if(i||(i=e.Utils.getScopeControl(n),r&&r.data&&(r.data.scope=i)),i){r&&(r.parentControl=i);var o=e.Utils.readProperty(i,t);return o&&"function"==typeof o?o.bind(i):o}},select:function(n,t,r){var i=r&&r.data?r.data.scope:null;i||(i=e.Utils.getScopeControl(n),r&&r.data&&(r.data.scope=i));var n=null,o=t.split("|"),a=o[0];if(i&&(n=i.element.querySelector(a)),n||(n=document.querySelector(a)),1==o.length)return n;if(o.length>1){var s=p(n,t.substr(o[0].length+1));return s}},obj:function(n,t,r){return WinJS.UI.optionsParser(t,window,{select:WinJS.Utilities.markSupportedForProcessing(function(t){var r=e.Utils.getScopeControl(n);return r?r.element.querySelector(t):document.querySelector(t)})})},prom:function(e,n,t){var r=A(e,n,t);return r.then&&(r=r.then(null,null),r.mcnMustResolve=!0),r},list:function(e,n,t){var r=A(e,n,t);if(r){if(r.then){var i=r.then(function(e){return new WinJS.Binding.List(e).dataSource});return i.mcnMustResolve=!0,i}return new WinJS.Binding.List(r).dataSource}},global:function(n,t,r){return e.Utils.readProperty(window,t)},templ:function(n,t,r){return e.Templates.get(t)},element:function(e,n,t){var r=A(e,n,t);return r?r.element:void 0},event:function(e,n,t){var r=A(e,n,t),i=null;r&&t&&t.name&&(t&&(i=t.parentControl),r&&"function"==typeof r&&(i&&i.eventTracker?i.eventTracker.addEvent(t.control,t.name,r):t.control.addEventListener(t.name,r)))}},n.resolveValue=A,n.applyValue=x,n.hasValue=_,n.formatXHRError=M,n.unwrapJoinError=D,n.inject=N}(n=e.Utils||(e.Utils={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(e){var n;!function(n){function t(e){var n=o[e];return o[e]?n:new WinJS.Binding.Template(null,{href:e})}function r(n,t){var r=e.Templates.get(n);if(r)return e.Templates.makeInteractive(r,t);throw{message:"template not found for "+n}}function i(n,t){return function(r){return r.then(function(r){return n.render(r).then(function(n){if(t.tap)for(var i in t.tap){var o=n.querySelector(i);e.UI.tap(o,function(e){t.tap[i](e,r)})}if(t.click)for(var i in t.click){var o=n.querySelector(i);o.onclick=function(e){t.click[i](e,r)}}return n})})}}var o={};n.get=t,n.interactive=r,n.makeInteractive=i}(n=e.Templates||(e.Templates={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(e){var n;!function(n){function t(e,n){for(var t=0,r=0,i=e.clientWidth,o=e.clientHeight;e&&e!=n;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:r,width:i,height:o}}function r(){var e=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(e&&e.length)for(var n=0;n<e.length;n++){var t=e[n];t.winControl&&t.winControl.show()}}function i(){var e=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(e&&e.length)for(var n=0;n<e.length;n++){var t=e[n];t.winControl&&t.winControl.hide()}}function o(){var e=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(e&&e.length)for(var n=0;n<e.length;n++){var t=e[n];t.winControl&&(t.winControl.disabled=!0)}}function a(){var e=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(e&&e.length)for(var n=0,t=e.length;t>n;n++){var r=e[n];r.winControl&&(r.winControl.disabled=!1)}}function s(e,n){return new WinJS.Promise(function(t,r){function i(n){e.onload=void 0,e.onerror=void 0,e.onreadystatechange=void 0,r("element not loaded")}function o(r){e.onload=void 0,e.onerror=void 0,e.onreadystatechange=void 0,t({element:e,url:n})}e.onerror=i,e.onload=o,e.onreadystatechange=o,e.naturalWidth>0&&o(void 0),e.src=n})}function c(e){return new WinJS.Promise(function(n,t){function r(n){o.onload=void 0,o.onerror=void 0,t({message:"image not loaded : "+e,path:e})}function i(t){o.onload=void 0,o.onerror=void 0,n({element:o,url:e})}var o=new Image;o.onerror=r,o.onload=i,o.naturalWidth>0&&i(void 0),o.src=e})}function u(e){var n=[],t=!1;if(e.parentElement)for(var r=e.parentElement,i=0;i<r.children.length;i++)r.children[i]===e?t=!0:t&&n.push(r.children[i]);return n}function l(n){return new WinJS.Promise(function(t,r){var i=e.UI.listElementsAfterMe(n),o=WinJS.UI.Animation.createDeleteFromListAnimation([n],i);n.style.position="fixed",n.style.opacity="0",o.execute().done(function(){t(n)})})}function p(n,t,r){if(n){n.classList.add("page-action");var i=n.dataset.pageAction||n.getAttribute("tap"),o=r[i];o&&"function"==typeof o&&e.UI.tap(n,function(t){var o=WinJS.Promise.wrap(a),a=t.dataset.pageActionArgs||n.getAttribute("tap-args");if(a&&"string"==typeof a){var s=e.Utils.readValue(t,a);o=WinJS.Promise.as(s).then(function(e){if("string"==typeof e)try{e=WinJS.UI.optionsParser(e,window)}catch(n){return}return e}),s&&(a=s)}return o.then(function(e){return r[i].bind(r)({elt:t,args:e})})})}}function f(e,n){var t=e.querySelectorAll("*[data-page-action], *[tap]");if(t&&t.length)for(var r=0,i=t.length;i>r;r++){var o=t[r];p(o,e,n)}}function d(n,t){if(n){n.classList.add("page-link");var r=n.getAttribute("applink"),i=n.dataset.pageLink||n.getAttribute("linkto");if(i&&i.indexOf("/")<0){var o=e.Utils.readProperty(window,i);o&&(i=o)}if(i){var a=n.dataset.pageActionOptions||n.getAttribute("tap-options");if(a)try{a=WinJS.UI.optionsParser(a,window)}catch(s){return}e.UI.tap(n,function(t){var o=WinJS.Promise.wrap(),a=t.dataset.pageActionArgs||n.getAttribute("linkto-args");if(a&&"string"==typeof a){var s=e.Utils.readValue(t,a);o=WinJS.Promise.as(s).then(function(e){if("string"==typeof e)try{e=WinJS.UI.optionsParser(e,window)}catch(n){}return e})}return o.then(function(n){if(!r&&e.UI.parentNavigator&&e.UI.parentNavigator(t)){var o=e.UI.parentNavigator(t);return o.navigate(i,n)}return WinJS.Navigation.navigate(i,n)})},a)}}}function g(e){var n=e.querySelectorAll("*[data-page-link], *[linkto]");if(n&&n.length)for(var t=0,r=n.length;r>t;t++){var i=n[t];d(i,e)}}function v(e){for(var n=e.parentNode;n;){if(n.mcnNavigator)return n.winControl;n=n.parentNode}}function h(e,n,t){if(e){e.classList.add("page-member");var r=e.dataset.pageMember||e.getAttribute("member");r||(r=e.id),r&&!t[r]&&(t[r]=e,e.winControl&&(t[r]=e.winControl))}}function m(e,n){var t=e.querySelectorAll("*[data-page-member], *[member]");if(t&&t.length)for(var r=0,i=t.length;i>r;r++){var o=t[r];h(o,e,n)}}function y(n,t){e.UI.bindPageActions(n,t),e.UI.bindPageLinks(n)}function w(n,t){function r(e){var n=new WinJS.Promise(function(e){});e.detail.setPromise(n),n.cancel()}var i={control:n,callback:t};L.push(i);var o=function(e){var n=L.indexOf(i);if(n===L.length-1)for(i.callback.bind(i.control)(e),n--;n>=0&&!e.handled;){var t=L[n];t.callback.bind(t.control)(e),n--}};WinJS.Navigation.addEventListener("beforenavigate",r),window.Windows&&window.Windows.Phone?window.Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",o):document.addEventListener("backbutton",o);var a=function(e){("Esc"===e.key||"Backspace"===e.key)&&o(e)};return document.body.addEventListener("keypress",a),e.UI.Application&&e.UI.Application.navigator&&e.UI.Application.navigator.addLock(),function(){e.UI.Application&&e.UI.Application.navigator&&e.UI.Application.navigator.removeLock();var n=L.indexOf(i);L.splice(n,1),document.body.removeEventListener("keypress",a),WinJS.Navigation.removeEventListener("beforenavigate",r),window.Windows&&window.Windows.Phone?window.Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",o):document.removeEventListener("backbutton",o)}}function C(e){e&&e.mcnTapTracking&&(e.mcnTapTracking.dispose(),e.mcnTapTracking=null)}function S(e){if(e)for(var n=e.querySelectorAll(".tap"),t=0,r=n.length;r>t;t++)C(n[t])}function T(t,r,i){if(t){var o=function(e){var n=e.currentTarget||e.target,t=n.mcnTapTracking;!n.disabled&&t&&(void 0===e.button||0===e.button||t.allowRickClickTap&&2===e.button)&&(t.lock&&(e.pointerId&&e.currentTarget.setPointerCapture&&e.currentTarget.setPointerCapture(e.pointerId),e.stopPropagation(),e.preventDefault()),WinJS.Utilities.addClass(n,"tapped"),WinJS.Utilities.removeClass(n,"tap-error"),clearTimeout(t.pendingErrorTimeout),t.pointerdown=e.changedTouches?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY},t.animDown(e.currentTarget),t.tapOnDown&&t.callback(n,e))},a=function(e){var n=e.currentTarget||e.target,t=n.mcnTapTracking;if(t&&t.pointerdown){if(WinJS.Utilities.removeClass(n,"tapped"),e.pointerId&&n.releasePointerCapture)try{n.releasePointerCapture(e.pointerId)}catch(r){console.error(r)}t.disableAnimation||t.animUp(e.currentTarget)}},s=function(e){var n=e.currentTarget||e.target,t=n.mcnTapTracking;if(t&&(void 0===e.button||0===e.button||t.allowRickClickTap&&2===e.button)){if(n.releasePointerCapture)try{n.releasePointerCapture(e.pointerId)}catch(r){console.error(r)}if(t&&!t.tapOnDown){e.stopPropagation();var i=function(){if(t&&t.pointerdown){if(e.changedTouches)var r=Math.abs(t.pointerdown.x-e.changedTouches[0].clientX),i=Math.abs(t.pointerdown.y-e.changedTouches[0].clientY);else var r=Math.abs(t.pointerdown.x-e.clientX),i=Math.abs(t.pointerdown.y-e.clientY);if(t.callback&&15>r&&15>i){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();var o=t.callback(n,e);WinJS.Promise.is(o)&&(n.disabled=!0,WinJS.Utilities.addClass(n,"tap-working"),o.then(function(){n.disabled=!1,WinJS.Utilities.removeClass(n,"tap-working")},function(e){n.disabled=!1,WinJS.Utilities.removeClass(n,"tap-working"),console.error(e),WinJS.Application.queueEvent({type:"mcn-taperror",error:e}),WinJS.Utilities.addClass(n,"tap-error"),t.errorDelay&&(t.pendingErrorTimeout=setTimeout(function(){t.pendingErrorTimeout=null,WinJS.Utilities.removeClass(n,"tap-error")},t.errorDelay))}))}t&&t.pointerdown&&(t.pointerdown=void 0)}};t.awaitAnim?t.animUp(n).done(i):(t.animUp(n),i())}WinJS.Utilities.removeClass(n,"tapped")}};if(!i){var c=t.getAttribute("tap-options");if(c)try{i=WinJS.UI.optionsParser(c,window)}catch(u){return}}var l=i||{};t.mcnTapTracking&&t.mcnTapTracking.dispose(),WinJS.Utilities.addClass(t,"tap"),t.mcnTapTracking=t.mcnTapTracking||{},t.mcnTapTracking.eventTracker=new e.UI.EventTracker,t.mcnTapTracking.disableAnimation=l.disableAnimation||n.defaultTapBehavior.disableAnimation,t.mcnTapTracking.disableAnimation?(t.mcnTapTracking.animDown=function(){return WinJS.Promise.wrap()},t.mcnTapTracking.animUp=function(){return WinJS.Promise.wrap()}):(t.mcnTapTracking.animDown=l.animDown||n.defaultTapBehavior.animDown,t.mcnTapTracking.animUp=l.animUp||n.defaultTapBehavior.animUp),t.mcnTapTracking.element=t,t.mcnTapTracking.callback=r,t.mcnTapTracking.lock=l.lock,t.mcnTapTracking.awaitAnim=l.awaitAnim||n.defaultTapBehavior.awaitAnim,t.mcnTapTracking.errorDelay=l.errorDelay||n.defaultTapBehavior.errorDelay,t.mcnTapTracking.tapOnDown=l.tapOnDown,t.mcnTapTracking.pointerModel="none",t.mcnTapTracking.dispose=function(){WinJS.Utilities.removeClass(t,"tap"),this.eventTracker.dispose(),t.mcnTapTracking=null,t=null},void 0!==t.onpointerdown?(t.mcnTapTracking.pointerModel="pointers",t.mcnTapTracking.eventTracker.addEvent(t,"pointerdown",o),t.mcnTapTracking.eventTracker.addEvent(t,"pointerout",a),t.mcnTapTracking.eventTracker.addEvent(t,"pointerup",s)):window.Touch&&!l.noWebkitTouch?(t.mcnTapTracking.pointerModel="touch",t.mcnTapTracking.eventTracker.addEvent(t,"touchstart",function(e){t.mcnTapTracking.cancelMouse=!0,o(e)}),t.mcnTapTracking.eventTracker.addEvent(t,"touchcancel",function(e){setTimeout(function(){t&&t.mcnTapTracking&&(t.mcnTapTracking.cancelMouse=!1)},1e3),a(e)}),t.mcnTapTracking.eventTracker.addEvent(t,"touchend",function(e){setTimeout(function(){t&&t.mcnTapTracking&&(t.mcnTapTracking.cancelMouse=!1)},1e3),s(e)}),t.mcnTapTracking.eventTracker.addEvent(t,"mousedown",function(e){t.mcnTapTracking.cancelMouse||o(e)}),t.mcnTapTracking.eventTracker.addEvent(t,"mouseleave",function(e){a(e)}),t.mcnTapTracking.eventTracker.addEvent(t,"mouseup",function(e){t.mcnTapTracking.cancelMouse?a(e):s(e)})):(t.mcnTapTracking.pointerModel="mouse",t.mcnTapTracking.eventTracker.addEvent(t,"mousedown",o),t.mcnTapTracking.eventTracker.addEvent(t,"mouseleave",a),t.mcnTapTracking.eventTracker.addEvent(t,"mouseup",s))}}function b(e,n){var t=null;return new WinJS.Promise(function(r,i){var o=function(n){n.srcElement===e&&a()},a=function(){clearTimeout(t),e.removeEventListener("transitionend",o,!1),r()};e.addEventListener("transitionend",o,!1),t=setTimeout(a,n||1e3)})}n.Application={},n.disableAutoResources=!1,n.offsetFrom=t;var P=function(){function e(){this.events=[]}return e.prototype.addEvent=function(e,n,t,r){var i=this;e.addEventListener(n,t,r);var o=function(){try{e.removeEventListener(n,t);var r=i.events.indexOf(o);r>=0&&i.events.splice(r,1)}catch(a){console.error("unexpected error while releasing callback "+a.message)}};return this.events.push(o),o},e.prototype.addBinding=function(e,n,t){e.bind(n,t);var r=function(){e.unbind(n,t)};return this.events.push(r),r},e.prototype.dispose=function(){for(var e=0;e<this.events.length;e++)this.events[e]();this.events=[]},e}();n.EventTracker=P,n.appbarsOpen=r,n.appbarsClose=i,n.appbarsDisable=o,n.appbarsEnable=a,n.elementLoaded=s,n.loadImage=c,n.listElementsAfterMe=u,n.removeElementAnimation=l,n.bindPageActions=f,n.bindPageLinks=g,n.parentNavigator=v,n.bindMembers=m,n.bindActions=y;var W=function(){function e(e,n){var t=this;t.queries=[],t.linkedControl=n;for(var r in e){var i=e[r];i.query&&t.registerMediaEvent(r,i.query,i)}}return e.prototype.dispose=function(){var e=this;e.linkedControl=null,this.queries.forEach(function(e){e.dispose()})},e.prototype.registerMediaEvent=function(e,n,t){var r=this,i=window.matchMedia(n),o={name:e,query:n,data:t,mq:i,dispose:null},a=function(e){e.matches&&r._mediaEvent(e,o)};i.addListener(a),o.dispose=function(){i.removeListener(a)},r.queries.push(o)},e.prototype._mediaEvent=function(e,n){var t=this;t.linkedControl&&WinJS.UI.setOptions(t.linkedControl,n.data),t.dispatchEvent("media",n)},e.prototype.check=function(){var e=this;e.queries.forEach(function(n){var t=window.matchMedia(n.query);t.matches&&e._mediaEvent({matches:!0},n)})},e.prototype.addEventListener=function(e,n,t){},e.prototype.dispatchEvent=function(e,n){return!1},e.prototype.removeEventListener=function(e,n,t){},e}();n.MediaTrigger=W,WinJS.Class.mix(e.UI.MediaTrigger,WinJS.Utilities.eventMixin);var L=[];n.registerNavigationEvents=w,n.untap=C,n.untapAll=S,n.defaultTapBehavior={animDown:null,animUp:null,disableAnimation:!1,awaitAnim:!1,errorDelay:3e3},WinJS&&WinJS.UI&&WinJS.UI.Animation&&(n.defaultTapBehavior.animDown=WinJS.UI.Animation.pointerDown,n.defaultTapBehavior.animUp=WinJS.UI.Animation.pointerUp),n.tap=T,n.afterTransition=b;var k=function(){function n(e,n,t,r){this.element=document.createElement(e),n&&(this.element.className=n),t&&t.appendChild(this.element),this.parent=r,this.childs=[],r&&r.childs.push(this)}return n["for"]=function(e){var t=new n(null);return t.element=e,t},n.fragment=function(){var e=new n(null);return e.element=document.createDocumentFragment(),e},Object.defineProperty(n.prototype,"control",{get:function(){return this.element.winControl},enumerable:!0,configurable:!0}),n.prototype.addClass=function(e){return this.element&&this.element.classList.add(e),this},n.prototype.className=function(e){return this.element&&(this.element.className=e),this},n.prototype.opacity=function(e){return this.element&&(this.element.style.opacity=e),this},n.prototype.display=function(e){return this.element&&(this.element.style.display=e),this},n.prototype.hide=function(){return this.element&&(this.element.style.display="none"),this},n.prototype.visibility=function(e){return this.element&&(this.element.style.visibility=e),this},n.prototype.text=function(e){return this.element&&(this.element.textContent=e),this},n.prototype.html=function(e){return this.element&&(this.element.innerHTML=e),this},n.prototype.attr=function(e,n){return this.element&&this.element.setAttribute(e,n),this},n.prototype.style=function(e,n){return this.element&&(this.element.style[e]=n),this},n.prototype.styles=function(e){var n=this.element.style,t=Object.keys(e);return t.forEach(function(t){n[t]=e[t]}),this},n.prototype.appendTo=function(e){return this.element&&e&&e.appendChild(this.element),this},n.prototype.tap=function(n,t){return this.element&&e.UI.tap(this.element,n,t),this},n.prototype.append=function(e,t,r){var i=new n(e,t,this.element,this);return r&&r(i),this},n.prototype.createChild=function(e,t){var r=new n(e,t,this.element,this);return r},n.prototype.ctrl=function(n,t){var r=n;return"string"==typeof n&&(r=e.Utils.readProperty(window,n)),r&&new r(this.element,t),this},n}();n.FluentDOM=k}(n=e.UI||(e.UI={}))}(WinJSContrib||(WinJSContrib={}));var __global=this,profiler=__global.msWriteProfilerMark||function(){},WinJSContrib;!function(e){var n;!function(n){var t;!function(n){function t(e,n,t,r,i,o){var a=[];i&&a.push(WinJS.Promise.as(i.apply(e,r)));var s=n.querySelectorAll(".mcn-layout-ctrl");if(s&&s.length){for(var c=0,u=s.length;u>c;){var l=s[c];if(l){var p=l.winControl[t];p&&a.push(l.winControl.pageLifeCycle?l.winControl.pageLifeCycle.steps.layout.promise:WinJS.Promise.as(p.apply(l.winControl,r)))}l&&l.winControl&&l.winControl.pageLifeCycle?(c+=l.querySelectorAll(".mcn-fragment, .mcn-layout-ctrl").length+1,
l.winControl.__checkLayout()):c+=1}return WinJS.Promise.join(a).then(function(){return o?WinJS.Promise.as(o.apply(e,r)):void 0})}return o?WinJS.Promise.as(o.apply(e,r)):WinJS.Promise.wrap()}function r(n,t,r,i){function o(n){i.getFragmentElement&&i.getFragmentElement(n),r&&r.injectToPage&&e.Utils.inject(n,r.injectToPage),n.navigationState={location:t,state:r},i.oncreate&&i.oncreate(n.element,r),i.oninit&&n.pageLifeCycle.steps.init.attach(function(){return i.oninit(n.element,r)}),(n.enterPageAnimation||i.enterPage)&&(n._enterAnimation=n.enterPageAnimation?n.enterPageAnimation:i.enterPage,n.enterPageAnimation=function(){var e=this,n=null;return c.style.opacity="",n=e&&e.getAnimationElements?e.getAnimationElements(!1):e.element,n?e._enterAnimation(n):void 0}),i.onrender&&n.pageLifeCycle.steps.process.attach(function(){i.onrender(n.element,r)}),e.UI.disableAutoResources||n.pageLifeCycle.steps.process.attach(function(){return WinJS.Resources.processAll(c)}),i.closeOldPagePromise&&n.pageLifeCycle.steps.ready.attach(function(){return i.closeOldPagePromise}),n.pageLifeCycle.steps.ready.attach(function(){return i.onready&&i.onready(n.element,r),n.enterPageAnimation?WinJS.Promise.as(n.enterPageAnimation(c,i)):void(n.element.style.opacity="")}),n.pageLifeCycle.steps.ready.promise.then(a,s)}var a,s;i=i||{};var c=document.createElement("div");c.setAttribute("dir",__global.getComputedStyle(c,null).direction),c.style.opacity="0",n.appendChild(c);{var u=new WinJS.Promise(function(e,n){a=e,s=n}),l=i.parented?WinJS.Promise.as(i.parented):null,p=WinJS.UI.Pages.get(t);new p(c,r,o,l)}return u}var i=e.Logs.getLogger("WinJSContrib.UI.Pages");n.verboseTraces=!1,n.defaultFragmentMixins=[{$:function(e){return $(e,this.element||this._element)},q:function(e){return this.element?this.element.querySelector(e):void 0},qAll:function(e){if(this.element){var n=this.element.querySelectorAll(e);return n&&!n.forEach&&(n=[].slice.call(n)),n}}},{dispose:function(){this._promises&&(this.cancelPromises(),this._promises=null)},promises:{configurable:!0,get:function(){return this._promises||(this._promises=[]),this._promises}},addPromise:function(e){return this.promises.push(e),e},cancelPromises:function(){var e=this;if(e.promises){for(var n=0;n<e.promises.length;n++)e.promises[n]&&e.promises[n].cancel();e.promises=[]}}},{dispose:function(){this._eventTracker&&(this._eventTracker.dispose(),this._eventTracker=null)},eventTracker:{configurable:!0,get:function(){return this._eventTracker||(this._eventTracker=new e.UI.EventTracker),this._eventTracker}}}],n.renderFragment=r;var o=function(){function e(e,t,r){var i=this;this.queue=[],this.isDone=!1,this.stepName=t,n.verboseTraces&&(this.created=new Date),this.promise=new WinJS.Promise(function(e,n){i._resolvePromise=e,i._rejectPromise=n}),e.promises.push(this.promise),r&&r.pageLifeCycle&&r.pageLifeCycle.steps[t].attach(function(){return i.promise})}return e.prototype.attach=function(e){return this.queue&&!this.isDone?(this.queue.push(e),this.promise):WinJS.Promise.as(e())},e.prototype.resolve=function(e){function t(){return r.resolved=new Date,r._resolvePromise(e),n.verboseTraces&&(r.resolved=new Date,i.verbose("resolved "+r.stepName+"("+(r.resolved-r.created)+"ms) ")),r.promise}var r=this;if(this.isDone=!0,this.queue&&this.queue.length){var o=[];return this.queue.forEach(function(e){o.push(new WinJS.Promise(function(n,t){try{WinJS.Promise.as(e()).then(function(e){n(e)},t)}catch(r){t(r)}}))}),this.queue=null,WinJS.Promise.join(o).then(function(){return t()},this.reject.bind(this))}return this.queue=null,t()},e.prototype.reject=function(e){return this.isDone=!0,this.queue=null,this._rejectPromise(e),WinJS.Promise.wrapError(this.promise)},e}();n.PageLifeCycleStep=o,function(n,r,a,s,c,u,l,p,f,d){"use strict";function g(e){var n=r.document.createElement("a");return n.href=e,n.href}function v(e){return r.document.location.href.toLowerCase()===e.toLowerCase()}function h(e,n){var t=e.prototype.dispose;return e=a.Class.mix(e,n),t&&n.hasOwnProperty("dispose")&&(e.prototype.dispose=function(){n.dispose.apply(this),t.apply(this)}),e}function m(e,n){var t=Object.keys(e.prototype);return t.forEach(function(t){void 0===n.prototype[t]&&(n.prototype[t]=e.prototype[t])}),e}function y(e,n){return n?"function"==typeof n?(e.prototype._attachedConstructor=n,m(e,n)):"object"==typeof n?h(e,n):e:e}function w(n,r,o,a,s,u){o.style.display&&(n.pageLifeCycle.initialDisplay=o.style.display),o.style.display="none";var f=" uri='"+r+"'"+c._getProfilerMarkIdentifier(n.element);l("WinJS.UI.Pages:createPage"+f+",StartTM"),e.UI.WebComponents&&(n.pageLifeCycle.observer=e.UI.WebComponents.watch(n.element));var d=p.timeout().then(function(){return n.load(r)}).then(function(e){if(n._attachedConstructor){var t=new n._attachedConstructor(o,a);o.winControl=t;var r=Object.keys(n);r.forEach(function(e){t[e]=n[e]}),t.pageLifeCycle.page=t,n.pageControl=t,n.dismissed=!0,n=t}return e}),g=d.then(function(e){return p.join({loadResult:e,initResult:n.init(o,a)})}).then(function(e){return n.pageLifeCycle.steps.init.resolve().then(function(){return e})}).then(function(e){return n.render(o,a,e.loadResult)}).then(function(e){return n.rendered(o,a)}).then(function(e){return n.pageLifeCycle.steps.render.resolve()}).then(function(){return e.UI.WebComponents?WinJS.Promise.timeout():void 0});n.elementReady=g.then(function(){return o}),n.renderComplete=g.then(function(){return n.process(o,a)}).then(function(e){return n.pageLifeCycle.steps.process.resolve()}).then(function(){return e.UI.bindMembers(o,n),n.processed(o,a)}).then(function(){return n});var v=function(){s&&s(n),l("WinJS.UI.Pages:createPage"+f+",StopTM")};n.renderComplete.then(v,v),n.layoutComplete=n.renderComplete.then(function(){return u}).then(function(){o.style.display=n.pageLifeCycle.initialDisplay||"";o.getBoundingClientRect();return t(n,o,"pageLayout",[o,a],null,n.pageLayout)}).then(function(){e.UI.bindActions(o,n)}).then(function(e){return n.pageLifeCycle.steps.layout.resolve()}).then(function(){return n}),n.readyComplete=n.layoutComplete.then(function(){n.ready(o,a),n.pageLifeCycle.ended=new Date,n.pageLifeCycle.delta=n.pageLifeCycle.ended-n.pageLifeCycle.created,i.debug("navigation to "+r+" took "+n.pageLifeCycle.delta+"ms")}).then(function(e){return n.pageLifeCycle.steps.ready.resolve()}).then(function(){return n}).then(null,function(e){if(n.error)return n.error(e);if(!e||!e._value||"Canceled"!==e._value.name)return WinJS.Promise.wrapError(e)}),n.__checkLayout=function(){var e=this,n=arguments,r=null;return r=e.updateLayout?WinJS.Promise.as(e.updateLayout.apply(e,n)):WinJS.Promise.wrap(),r.then(function(){return t(e,e.element,"updateLayout",n)})}}function C(n,t){var i=g(n).toLowerCase(),s=W[i];return n=g(n),s||(s=a.Class.define(function(t,i,a,s){var c=this,l=e.Utils.getScopeControl(t);u.addClass(t,"win-disposable"),u.addClass(t,"pagecontrol"),u.addClass(t,"mcn-layout-ctrl"),c.pageLifeCycle={created:new Date,location:n,stop:function(){c.readyComplete.cancel(),c.cancelPromises(),this.observer&&(this.observer.disconnect(),this.observer=null)},steps:{init:new o(c,"init",null),render:new o(c,"render",null),process:new o(c,"process",l),layout:new o(c,"layout",l),ready:new o(c,"ready",l)},initialDisplay:null},this._disposed=!1,this.element=t=t||r.document.createElement("div"),t.msSourceLocation=n,this.uri=n,this.selfhost=v(n),t.winControl=this,c.parentedComplete=s,w(this,n,t,i,a,s)},L),s=a.Class.mix(s,WinJS.UI.DOMEventMixin),e.UI.Pages.defaultFragmentMixins.forEach(function(e){h(s,e)}),W[i]=s),s=y(s,t),s.selfhost=v(n),s}function S(e,t){var i=W[e];return i||(i=C(e)),t&&(i=y(i,t)),i.selfhost&&WinJS.Utilities.ready(function(){T(g(e),r.document.body)},!0),s.viewMap||s._viewMap||"function"==typeof t||n._corePages.define(e,t),i}function T(e,n,t,r){var i=s.get(e),o=new i(n,t,null,r);return o.renderComplete.then(null,function(e){return p.wrapError({error:e,page:o})})}function b(e){var n=W[e];return n||(n=S(e)),n}function P(e){f.clearCache(g(e)),delete W[e.toLowerCase()]}if(r.document&&s){var W=s._viewMap||s.viewMap||{},L={dispose:function(){this._disposed||(this.pageLifeCycle.stop(),this.pageLifeCycle=null,this._disposed=!0,this.readyComplete.cancel(),u.disposeSubTree(this.element),this.element=null)},init:function(){},load:function(e){return this.selfhost?void 0:f.renderCopy(g(e))},process:function(e,n){return d.processAll(e)},processed:function(e,n){},render:function(e,n,t){return this.selfhost||e.appendChild(t),e},rendered:function(e,n){},ready:function(){}};n._corePages={get:s.get,render:s.render,define:s.define,_remove:s._remove,_viewMap:W};var k={define:S,get:b,render:T,_remove:P,_viewMap:W},J=WinJS.UI.Pages;WinJS.Namespace._moduleDefine(n,null,k),J.get=k.get,J.define=k.define,J.render=k.render,J._remove=k._remove,WinJS.UI.HtmlControl=WinJS.Class.define(function(e,n,t){WinJS.UI.Pages.render(n.uri,e,n).then(t,function(){t()})})}}(e.UI.Pages,__global,WinJS,WinJS.UI.Pages,WinJS.Utilities,WinJS.Utilities,profiler,WinJS.Promise,WinJS.UI.Fragments,WinJS.UI)}(t=n.Pages||(n.Pages={}))}(n=e.UI||(e.UI={}))}(WinJSContrib||(WinJSContrib={}));